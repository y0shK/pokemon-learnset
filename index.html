<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="UTF-8">

    </head>

    <title> Pokemon Learnset Resource </title>

    <body>

    <h1> Pokemon Learnsets by Generation </h1>

    <p> What Pokemon do you want the learnset for? </p>

    <!-- make sure that there is some pokemon entered, because it's necessary for the app functionality-->
    <!-- ask if the user cares about a specific generation
    if yes, direct to the specific generation, else direct to general page -->
    <!-- on keyup, if the text box is blank, then ensure that the user provides proper input -->

    <input type="text" id="pokemon" onkeyup="verifyPokemon()"> <!-- input pokemon's name -->

    <p id="userPrompt"> <br> </p>

    <!--execute prompt for better input
        if the box is typed in but left blank, then prompt the user
        else, simply type the answer-->
    <script>
        function verifyPokemon() {
            var pokemon_provided = document.getElementById("pokemon").value;
            //document.getElementById("userPrompt").textContent = pokemon_provided;
            if (!pokemon_provided) {
                document.getElementById("userPrompt").textContent = "Please enter a Pokemon!";
            }
            //else {
              //  document.getElementById("userPrompt").textContent = pokemon_provided;
            //}

    }
    </script>

    <br>

    <p> What generation? </p>
    <input type="text" id="generation"> <!-- generation needed for the learnset -->

    <!-- give pokemon's name to the js script portion-->
    <button id="button_pokemon" onclick="getPokemon()"> enter Pokemon </button>
    <button id="button_generation" onclick="getGeneration()"> enter generation </button>

    <p id="output_pokemon"></p>
    <p id="output_generation"></p>

    <!-- w3schools.com -->
    <script>
        function getPokemon() {
            var pokemon = document.getElementById("pokemon").value;
            return pokemon;
    }
    getPokemon();
    </script>

    <!-- similar script for generations-->

    <script>
        function getGeneration() {
            var generation = document.getElementById("generation").value;
            return generation
    }
    getGeneration();
    </script>

    <!-- if Enter is pressed in the text box, obtain the output value -->
    <!-- https://www.w3schools.com/howto/howto_js_trigger_button_enter.asp -->
    <script>
        // Get the input field
        var input = document.getElementById("pokemon");

        // Execute a function when the user releases a key on the keyboard
        input.addEventListener("keyup", function(event) {

        // Number 13 is the "Enter" key on the keyboard
        if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("button_pokemon").click();
            }
        });
    </script>

    <!-- same script for generation text box -->
    <script>
        // Get the input field
        var input = document.getElementById("generation");

        // Execute a function when the user releases a key on the keyboard
        input.addEventListener("keyup", function(event) {

        // Number 13 is the "Enter" key on the keyboard
        if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("button_generation").click();
            }
        });
    </script>

    <button onclick=redirectPage()> redirect </button>

    <p id="testPokemon"></p>

    <!-- take the base pokemondb link and concat a new url depending on given pokemon and generation -->
    <script>
        function redirectPage() {
            // getPokemon() returns false if string is empty and true if string is not empty
            // similarly, getGeneration() returns false if no integer is provided (or 0)
            // only if the values are not empty will we proceed with page redirection

            if (getPokemon() && getGeneration()) { // the string is not empty

                var base_url = "https://pokemondb.net/pokedex/";

                pokemon = getPokemon().toLowerCase();
                generation = String(getGeneration());

                pokemon_url = base_url.concat(pokemon);
                pokemon_url = pokemon_url.concat("/moves/")

                whole_url = pokemon_url.concat(generation);

                window.location.href = whole_url;
            }
        }

    </script>

    </body>

</html>